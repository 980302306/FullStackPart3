{"version":3,"sources":["service/persons.js","index.js"],"names":["baseUrl","newPerson","axios","post","then","response","data","get","id","delete","newPersons","put","Persons","persons","targetPerson","handleDelete","filter","person","name","match","RegExp","map","possibleTarget","key","number","onClick","Filter","filterPerson","onChange","Notification","message","style","color","type","background","fontSize","borderStyle","borderRadius","padding","marginBottom","text","PersonForm","addPerson","handleNameChange","handleNumberChange","onSubmit","value","App","useState","setPersons","emptyPerson","setNewPerson","setTargePerson","setMessage","useEffect","personService","initialPersons","catch","error","console","log","event","preventDefault","target","personObject","selectedPerson","find","window","confirm","updatedPerson","returnedPerson","setTimeout","toString","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c4fd31e7.chunk.js","sourcesContent":["import axios from 'axios';\n\n// const baseUrl='http://localhost:3001/persons'\n// const baseUrl='http://localhost:3001/api/persons'\nconst baseUrl='/api/persons'\nconst create=(newPerson)=>{\n    const request=axios.post(baseUrl,newPerson)\n    return request.then(response=>response.data)\n}\n\nconst getAll=()=>{\n    const request=axios.get(baseUrl)\n    return request.then(response=>response.data)\n}\n\nconst deletePerson =(id)=>{\n    const request=axios.delete(`${baseUrl}/${id}`)\n    return request.then(response=>response.data)\n}\n\nconst update=(id,newPersons)=>{\n    const request=axios.put(`${baseUrl}/${id}`,newPersons)\n    return request.then(response=>response.data)\n}\n\nexport default {create,getAll,deletePerson,update}","import React,{useState,useEffect} from 'react';\nimport ReactDOM from 'react-dom';\nimport personService from './service/persons'\n\nconst Persons=({persons,targetPerson, handleDelete})=>{\n  const possibleTargets=persons.filter(person=>person.name.match(new RegExp(targetPerson,'i')))\n    return possibleTargets.map(possibleTarget=>\n    <div key={possibleTarget.id}>\n      {possibleTarget.name}: {possibleTarget.number}\n      <button onClick={()=>handleDelete(possibleTarget.id,possibleTarget.name)}>delete</button>\n    </div>)\n}\n\nconst Filter=({filterPerson})=><form><div>filter shown with<input onChange={filterPerson}></input></div></form>\n\n\nconst Notification=({message})=>{\n  if(message===null) return null\n  const style={\n    color: message.type==='success'? 'green':'red',\n    background:'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n\n  return <div style={style}>{message.text}</div>\n}\nconst PersonForm=({addPerson,handleNameChange,handleNumberChange,newPerson})=>{\n  return(\n  <form onSubmit={addPerson}>\n    <div>name: <input value={newPerson.name} onChange={handleNameChange}/></div>\n    <div>number: <input value={newPerson.number} onChange={handleNumberChange}></input></div>\n    <div><button type=\"submit\">add</button></div>\n  </form>\n  )\n\n}\n\nconst App = () => {\n\n  const [ persons, setPersons ] = useState([]) \n  const emptyPerson={name:'',number:''}\n  const [ newPerson, setNewPerson ] = useState(emptyPerson)\n  const [ targetPerson, setTargePerson] = useState('')\n  const [message,setMessage] =useState(null)\n  useEffect(()=>{\n    personService\n    .getAll()\n    .then(initialPersons=>setPersons(initialPersons))\n    .catch(error=>console.log(error))\n  },[])\n\n  const addPerson=(event)=>{\n    event.preventDefault()\n    \n    const personObject={\n      name: newPerson.name,\n      number: newPerson.number\n    }\n    \n    const selectedPerson=persons.find(person=>person.name===newPerson.name)\n    if(selectedPerson){\n      if(window.confirm(`${newPerson.name} is already added to phonebook, replace the old number with a new one?`)){\n        const updatedPerson={...selectedPerson,number:newPerson.number}\n        personService\n        .update(selectedPerson.id,updatedPerson)\n        .then(returnedPerson=>{\n          setPersons(persons.map(person=>person.id===selectedPerson.id ? returnedPerson: person))\n          setNewPerson(emptyPerson)\n          setMessage({text:`updated ${selectedPerson.name}'s phone number`,type:'success'})\n          setTimeout(()=>setMessage(null),5000)\n        })\n        .catch(error=>{\n          // setMessage({text:`Information of ${selectedPerson.name} has already been removed from server`,type:'error'})\n          setMessage({text:error.response.data.message.toString(),type:'error'})\n          setPersons(persons.filter(person=>person.id!==selectedPerson.id))\n        })\n      }\n    }\n    else{\n      personService.create(personObject)\n      .then(returnedPerson=>{\n        setPersons(persons.concat(returnedPerson))\n        setNewPerson(emptyPerson)\n        setMessage({text:`added ${returnedPerson.name}`,type:'success'})\n        setTimeout(()=>setMessage(null),5000)\n      })\n      .catch(error=>{\n        setMessage({text:error.response.data.message.toString(),type:'error'})\n      })\n    }\n    \n\n    \n  }\n  const handleNameChange=(event)=>setNewPerson({...newPerson,name:event.target.value})\n\n  const handleNumberChange=(event)=>setNewPerson({...newPerson,number:event.target.value})\n\n  \n  const filterPerson=(event)=>{\n    event.preventDefault()\n    setTargePerson(event.target.value)\n  }\n  \n  const handleDelete=(id,name)=>{\n\n    if(window.confirm(`Delete ${name} ?`)){\n      personService\n      .deletePerson(id)\n      .then(returnedPerson=>{\n        setPersons(persons.filter(person=>person.id!==id))\n        setMessage({text:`Deleted ${name}`,type:'success'})\n        setTimeout(()=>setMessage(null),5000)\n      })\n      .catch(error=>{\n        console.log(error)\n        setMessage({text:`Information of ${name} has already been removed from server`,type:'error'})\n        setPersons(persons.filter(person=>person.id!==id))\n      })\n    }\n  }\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message}/>\n      <Filter filterPerson={filterPerson}/>\n      <h3>add a new</h3>\n      <PersonForm addPerson={addPerson} \n      handleNameChange={handleNameChange}\n      handleNumberChange={handleNumberChange}\n      newPerson={newPerson}/>\n      <h3>Numbers</h3>\n      <Persons persons={persons} targetPerson={targetPerson} handleDelete={handleDelete} /> \n    </div>\n  )\n}\n\nReactDOM.render(<App />,document.getElementById('root'))\n\nexport default App"],"sourceRoot":""}